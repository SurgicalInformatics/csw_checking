---
title: "![](https://globalsurg.org/wp-content/uploads/2020/09/logo-surgweek-1200x133.png){}"
date: "`r format(Sys.time(), '%d %B, %Y %H:%M')`"
output: html_document
resource_files:
- csw_reg_numbers.Rmd
---

<style type="text/css">
.main-container {
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE)

library(tidyverse)
library(DT)
library(knitr)
library(formattable)
library(waffle)

source("00_functions.R")
source("02_check_dashboard.R")
```

-------------------------------------

### Check the status of your team {.tabset .tabset-fade}

Find your team below to check their status then select the **Help** tab for more information.

You can find your reference number in the confirmation email you received immediately after submitting your registration request.

For summaries of team registration and data collection progress so far, click on the **Summary** tabs.


#### **Find your team**

```{r}

periods_check %>% 
    select(-time, -skip_team) %>% 
    mutate_at(vars(form_complete:accounts_created_success), function(x)
        (x == "Yes")) %>%
    # formattable prints NAs that have not been dealt with
    # quick dirty fix to make them '' instead - RP
    mutate(Period    = if_else(is.na(Period), "", Period),
           Specialty = if_else(is.na(Specialty), "", Specialty)) %>% 
    formattable(
        list(
            form_complete = formatter(
                "span",
                style = x ~ style(color = case_when(x ~ "green",!x ~ "red",
                                                    TRUE ~ "")),
                x ~ icontext(
                    case_when(x ~ "ok",!x ~ "remove",
                              TRUE ~ ""),
                    case_when(x ~ "Yes",!x ~ "No",
                              TRUE ~ ""))),
            period_choice_success = formatter(
                "span",
                style = x ~ style(color = case_when(x ~ "green",!x ~ "red",
                                                    TRUE ~ "")),
                x ~ icontext(
                    case_when(x ~ "ok",!x ~ "remove",
                              TRUE ~ ""),
                    case_when(x ~ "Yes",!x ~ "No",
                              TRUE ~ ""))),
            duplicate_check_success = formatter(
                "span",
                style = x ~ style(color = case_when(x ~ "green",!x ~ "red",
                                                    TRUE ~ "")),
                x ~ icontext(
                    case_when(x ~ "ok",!x ~ "remove",
                              TRUE ~ ""),
                    case_when(x ~ "Yes",!x ~ "No",
                              TRUE ~ ""))),
            emails_unique_success = formatter(
                "span",
                style = x ~ style(color = case_when(x ~ "green",!x ~ "red",
                                                    TRUE ~ "")),
                x ~ icontext(
                    case_when(x ~ "ok",!x ~ "remove",
                              TRUE ~ ""),
                    case_when(x ~ "Yes",!x ~ "No",
                              TRUE ~ ""))),
            orcids_valid_success = formatter(
                "span",
                style = x ~ style(color = case_when(x ~ "green",!x ~ "red",
                                                    TRUE ~ "")),
                x ~ icontext(
                    case_when(x ~ "ok",!x ~ "remove",
                              TRUE ~ ""),
                    case_when(x ~ "Yes",!x ~ "No",
                              TRUE ~ ""))),
            accounts_created_success = formatter(
                "span",
                style = x ~ style(color = case_when(x ~ "green",!x ~ "red",
                                                    TRUE ~ "")),
                x ~ icontext(
                    case_when(x ~ "ok",!x ~ "remove",
                              TRUE ~ ""),
                    case_when(x ~ "Yes",!x ~ "Not yet",
                              TRUE ~ ""))))) %>%
            as.datatable(
                rownames = FALSE,
                options = list(
                    pageLength = 50,
                    autoWidth = TRUE,
                    scrollX = TRUE),
                filter = "top",
                escape = FALSE,
                colnames = c("Ref." = "record_id",
           "Form complete?" = "form_complete",
           "Period unique?" = "period_choice_success",
           "Team members unique?" = "duplicate_check_success",
           "Unique emails used?" = "emails_unique_success",
           "ORCID names showing?" = "orcids_valid_success",
           "Accounts created?" = "accounts_created_success"))
        
```


#### **Help**

&nbsp;

Go to <a href="https://is.gd/surghelpdesk" target="_blank">**GlobalSurg-CovidSurg Helpdesk**</a> for general help relating to the Surg-Week project.

&nbsp;

Why is my account not created yet?

* If **Accounts created?** is showing as **Not yet**, this means your account is in the process of being created, you do not need to do anything further at this stage.
    * Accounts get created on Mondays, Wednesdays and Fridays.
    * Teams who are collecting in Period 3 will get accounts 12-16 October.
    * Teams who are collecting in Period 4 will get accounts 19-23 October.

* If **Accounts created?** is blank, this means all previous checks have not yet been passed.
    * Resolve any checks that have a cross and are marked as **No**, see below.

&nbsp;

Why am I seeing **No** for:

&nbsp;

* **Registration complete?** - Your registration form was missing vital information.
    * Check with enquiry@globalsurg.org which piece of information is missing from your application. 

&nbsp;

* **Period choice successful?** - Another team has already picked the same period and specialty as you.
    * You can check what the clash might be/what are the available periods from here: https://argoshare.is.ed.ac.uk/surgweek_periods/
    * You can then ask us to amend your record at: https://is.gd/surghelpdesk
    * Any questions ask at enquiry@globalsurg.org

&nbsp;

* **Valid ORCIDs?** - Either the ORCID you entered was not valid or no name is currently showing on your ORCID record.
    * Check that you have not made a mistake and that all name fields are complete and not set to private on ORCID: https://orcid.org/

&nbsp;

* **Team members unique?** - A member of your team also has a registration submitted with another team. Each person can only have a data entry account for a single team.
    * Email enquiry@globalsurg.org to clarify

&nbsp;

* **Unique emails used?** - The same email has been used for multiple team members.
    + Make sure that each team member has their own email associated with their registration details.
    
&nbsp;

**Specialty codes:**

&nbsp;

```{r}
read_excel("specialty abbreviation.xlsx", 
                                     col_types = c("skip", "text", "text")) %>% 
    select(specialty_code = specialty, specialty = specialty_longname) %>% 
    datatable(rownames = FALSE,
              width = "50%",
                options = list(
                    pageLength = 24,
                    autoWidth = TRUE,
                    scrollX = TRUE),
                filter = "top")
```

    
#### **Registration summary**

```{r out.extra='style="border: none;"', out.width='100%'}
include_url('https://argoshare.is.ed.ac.uk/content/468', height = "1600px")
```

#### **Data summary**

```{r out.extra='style="border: none;"', out.width='100%'}
include_url('https://argoshare.is.ed.ac.uk/content/470', height = "1000px")
```
